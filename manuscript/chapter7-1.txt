# การแตก Branch และการ Merge โค้ด #

ในการพัฒนาโปรแกรมเป็นทีม มีปัญหาหลายอย่างที่เป็นอุปสรรคทำให้การทำงานยุ่งยาก ลำบาก เช่น

- เมื่อแบ่งทีมออกเป็นทีย่อยๆ ต่างคนต่างเขียนโค้ดในส่วนรับผิดชอบของแต่ละทีม จะจัดการโปรเจ็กอย่างไรดี
- เมื่อโค้ดมีปัญหาจำเป็นต้องทำการ rollback จะวางโครงสร้างการ backup อย่างไรดี
- จะทำอย่างไรให้สองทีมสามารถแชร์โค้ดกันได้ ในขณะกำลังพัฒนาโปรแกรม
- จะทำอย่างไรไม่ให้มีการเขียนโค้ดซ้ำซ้อนกัน หรือหากซ้ำกันให้ซ้ำกันปริมาณที่น้อยที่สุด

จึงให้กำเนิดโมเดลการพัฒนาโปรแกรมแบบทีมขึ้นมา โดย 

ให้โฟลเดอร์ๆหนึ่งเก็บโค้ดหลัก ห้ามมีใครเข้าไปแก้ไข เรียกมันว่า trunk  นี่เป็นตัวตั้งต้น เมื่อเริ่มมีการพัฒนาโปรแกรม ให้ก้อปปี้โค้ดจาก trunk ไปเป็นโฟลเดอร์ใหม่ เรียกมันว่า branch หากมีหลายทีมและแต่ละทีมรับผิดชอบงานคนละส่วน ก็ให้ก้อปปี้โค้ดจาก trunk ไปเป็นหลายโฟลเดอร์ เมื่อมีหลาย branh เพื่อความเป็นระเบียบและจัดการง่าย ก็ให้มันไปอยู่ในโฟลเดอร์ branches

เมื่อพัฒนาโค้ดเสร็จ ทดสอบดีแล้วภายใต้ branch ต่างๆ ให้รวมโค้ดที่เขียนขึ้นเข้ามายังโฟลเดอร์ trunk แล้วเอาโค้ดใน trunk ขึ้น production 

และเพื่อเป็นการระบุตำแหน่งที่เอาโค้ดขึ้น production จึงให้ก้อปปี้โค้ดใน trunk ไปเป็นโฟลเดอร์ใหม่ เรียกมันว่า tag ผ่านไปๆ tag มันจะเริ่มมีมากขึ้น เพื่อความเป็นระเบียบและจัดการง่าย ก็ให้มันไปอยู่ในโฟลเดอร์ tags

กระบวนการตั้งต้นความคิดเป็นอย่างนี้

เมื่อแรกสร้าง SVN คนสร้างก็ยึดโมเดลการพัฒนาโปรแกรมแบบที่กล่าว แต่เปลี่ยนเป็นการก้อปปี้โค้ดแบบ refference และเมื่อมีการรวมโค้ดกัน SVN จะคอยตรวจสอบโค้ดแต่ละบรรทัด เพื่อให้โค้ดรวมกันได้อย่างถูกต้อง นั่นเป็นกระบวนการการทำงาน ภายในโปรแกรม เราไม่ต้องสนใจมาก

## การแตก Branch ตั้งแต่สร้าง Repository##

1. เปิดโปรแกรม visualSVN ขึ้นมา

2. คลิกขวาบนเมนู Repositories เลือก Create New Repository...

    ![](images/chapter7/visualsvn-create-project-with-structure-01.png)

3. คลิก Next

    ![](images/chapter7/visualsvn-create-project-with-structure-02.png)

4. ตั้งชื่อ Repository ในที่นี้ตั้งชื่อว่า garagmanagement จากนั้น คลิก Next

    ![](images/chapter7/visualsvn-create-project-with-structure-03.png)

5. ให้เลือกตัวเลือก Single-project repository (with the top-level 'trunk', 'branches', and 'tags' folders) เสร็จแล้วคลิกปุ่ม Next 

    ![](images/chapter7/visualsvn-create-project-with-structure-04.png)

6. เลือกตัวเลือก All Subversion users have Read/Write access เสร็จแล้วคลิกปุ่ม Create 

    ![](images/chapter7/visualsvn-create-project-with-structure-05.png)

7. คลิกปุ่ม Finish 

    ![](images/chapter7/visualsvn-create-project-with-structure-06.png)

เมื่อดู Repository ที่เพิ่งสร้าง จะเห็นโฟลเดอร์อยู่ 3 โฟลเดอร์คือ 

trunk : ไว้เก็บโค้ดที่พร้อมเอาขึ้น production
branches : ไว้เก็บโค้ดที่แตกสาขาการพัฒนาออกไป
tags : ไว้เก็บโค้ด tags (จะอธิบายความหมายของ tags ในบทต่อไป)

![](images/chapter7/visualsvn-create-project-with-structure-07.png)

## การ Merge โค้ด ##




- Branch คืออะไร
- Branch มีประโยชน์อย่างไร
- ทำไมต้องแตก Branch
- ไม่แตก Branch ได้มั้ย
